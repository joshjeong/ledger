.container
  .header
    .title-header
      Welcome, #{@user.name.capitalize}!
    #home-btn.fa.fa-list
    #new-btn.fa.fa-plus-square-o
    #chart-btn.fa.fa-line-chart
  .ledger-list
    = render partial: "form"

  .ledgers
    - @ledgers.reverse_each do |purchase|
      .item
        = link_to purchase.item, user_ledger_path(id: purchase.id), class: "purchase-link"
        $#{purchase.price}0
        #delete-btn.fa.fa-minus-square-o
        #edit-btn.fa.fa-edit
      .note  
        = purchase.note
      .date
        = time_ago(purchase.created_at)

  %table{class: "ledger-table"}
    %tbody
      %tr{class: "top_row"}
        %td
          Date
        %td
          Item
        %td
          Price
        %td
          Note
        %td
          Payment Type
        / - @ledgers.first.attributes.each do |attr_name, value|
      - @ledgers.each do |purchase|
        %tr{class: "table-content"}
          %td= get_date(purchase)
          %td= purchase.item
          %td= purchase.price
          %td= purchase.note
          %td= purchase.payment_type

  #container{:style => "min-width: 310px; height: 400px; max-width: 600px; margin: 0 auto"}

:javascript
  $(document).ready(function(){
    pieChart();
  })

  var pieChart = function(){

    $(function () {
        $('#container').highcharts({
            chart: {
                plotBackgroundColor: null,
                plotBorderWidth: 1,//null,
                plotShadow: false,
                backgroundColor: '#DEDCC3'
            },
            title: {
                text: "Expenditure Breakdown"
            },
            tooltip: {
                pointFormat: '{series.name}: <b>{point.percentage:.1f}%</b>'
            },
            plotOptions: {
                pie: {
                    allowPointSelect: true,
                    cursor: 'pointer',
                    dataLabels: {
                        enabled: true,
                        format: '<b>{point.name}</b>: {point.percentage:.1f} %',
                        style: {
                            color: (Highcharts.theme && Highcharts.theme.contrastTextColor) || 'black'
                        }
                    }
                }
            },
            series: [{
                type: 'pie',
                name: 'Expenditure Breakdown',
                data: #{"#{expenditure_breakdown}"}
            }]
        });
    });

  }





